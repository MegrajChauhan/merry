## Structure

### Structure Overview

Merry’s internal structure is composed of several interdependent components, each designed to serve a distinct role while maintaining the system’s modularity and event-driven nature. Together, they form the foundation of Merry Nexus’s flexibility and extensibility.

The primary components are:

1. Graves  
2. Soft Interface  
3. Hard Interface  
4. Utilities  

Each component is described below.

---

### Graves

**Graves** is the central component of Merry Nexus — often referred to as the **Manager** or the **brain of operations**. It is an **event-driven** system that governs nearly every aspect of Merry, except for the private structures belonging to individual executing architectures. Graves handles system initialization, resource coordination, and the launching of the first core.

Graves is composed of four subcomponents:

1. **Overseer**  
2. **Graves Reader**  
3. **Request Queue Manager**  
4. **Request Handlers**

This structure complements its event-driven design, ensuring that Graves does not become a bottleneck. It remains idle when inactive and only operates when events or requests require attention.

---

#### Overseer

The **Overseer** is the only continuously active part of Graves. Unlike other components that must be invoked externally, it operates autonomously with the help of the **Request Queue Manager**.  
Cores submit requests to Graves, and the Overseer ensures that these requests are processed correctly and efficiently. When there are no pending requests, it enters a sleep state and waits for new events requiring attention.

---

#### Graves Reader

The **Graves Reader** is responsible for parsing and interpreting the **metadata file**, which defines the initialization parameters and structural layout of the system. The detailed format and structure of this file will be described in a separate document.

---

#### Request Queue Manager

The **Request Queue Manager** maintains the central queue of system requests. It ensures proper queuing, ordering, and synchronization of events while preventing race conditions. Additionally, it notifies the Overseer whenever a new request or event is added to the queue.

---

#### Request Handlers

The **Request Handlers** execute specific types of requests submitted by cores and return results or responses to the originating core. Each handler specializes in a different request type, allowing the system to scale efficiently as new functionalities are introduced.  
A complete list of supported requests will be included in later documentation.

---

### Soft Interface

The **Soft Interface** serves as the abstraction layer between Merry Nexus and the **operating system**. It exists to provide a consistent and uniform method for interacting with OS-level services, ensuring that the rest of Merry remains platform-independent.

At the heart of this system is a single structur which defines a **common interface API**. This structure exposes a standardized set of operations and serves as the foundation for all system interactions.  
Merry itself only provides basic operations for these interfaces—such as creation, destruction, opening, and closing—while individual cores are responsible for implementing higher-level or specialized operations as needed.

This design minimizes the dependency on the host environment and promotes adaptability across different platforms and operating systems.

However, submitting requests to **Graves** from a core is an **expensive operation**. A core must wait until its request is completely processed before it can continue, as requests are fulfilled *synchronously* and *at all costs*.  
The **Soft Interface** mitigates this overhead by abstracting many system-level interactions locally, allowing cores to perform frequent operations without relying on Graves for every small task. As a result, system responsiveness and performance are greatly improved.

---

### Hard Interface

The **Hard Interface** is intended to act as the abstraction layer between Merry Nexus and the **underlying hardware**. Its goal is to provide hardware-level independence similar to how the Soft Interface abstracts the operating system.

However, at the current stage of development, the Hard Interface is **largely immature and mostly non-existent**. The framework for its integration has been conceptualized, but its concrete implementation and hardware abstraction mechanisms are still under design.

---

### Utilities

The **Utilities** component encompasses all of Merry’s internal data structures and helper modules that are essential for the functioning of the system. This includes:

- **Lists**  
- **Queues**  
- **Stacks**  
- **Generic containers** and supporting utilities

These tools form the backbone of many core systems and subsystems, providing reusable and efficient implementations of common algorithms and data structures.  
They also play a critical role in ensuring thread safety, memory efficiency, and structural consistency throughout the entire Nexus.

As Merry evolves, the Utilities module will likely expand to include more specialized structures—such as priority queues, hash maps, or event trees—to support increasingly complex functionality across architectures.

---
